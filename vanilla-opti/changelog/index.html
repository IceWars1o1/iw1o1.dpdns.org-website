<!doctype html>
<html lang="zh-CN">
    <head>
        <meta name="viewport" content="width=device-width,initial-scale=1">
        <meta charset="UTF-8">
        <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon">
        <link rel="icon" href="/favicon.ico" type="image/x-icon">
        <link rel="stylesheet" href="/assets/css/styles.css">
        <title>原版优化整合包 - 更新日志</title>
        <style>
        /* 1. ASCII 专用（0000-007F） */
        @font-face {
          font-family: 'Mojangles';
          src: url('/assets/font/Mojangles.woff2') format('woff2');
          unicode-range: U+0000-007F;          /* 仅 ASCII */
          font-weight: normal;
          font-style: normal;
        }
        
        /* 2. 非 ASCII 用 Unifont */
        @font-face {
          font-family: 'Unifont';
          src: url('/assets/font/Unifont.woff2') format('woff2');
          unicode-range: U+0080-10FFFF;        /* 除 ASCII 外的所有字符 */
          font-weight: normal;
          font-style: normal;
        }
		:root{
		  --accent:#0078d4;
		  --bg:#f5f7fa;
		  --card:#ffffff;
		  --text:#222;
		  --muted:#666;
		  
		  --shadow:0 4px 18px rgba(0,0,0,.08);
		  --font:Mojangles,Unifont,"Segoe UI",Roboto,Helvetica,Arial,sans-serif;
		}
		*{box-sizing:border-box;margin:0;padding:0}
		html{line-height:1.6;-webkit-font-smoothing:antialiased}
		body{
		  font-family:var(--font);
		  background:var(--bg);
		  color:var(--text);
		  
		}
		.log-container{
		  radius:10px;
		  max-width:800px;
		  margin:auto;
		  background:var(--card);
		  border-radius:var(--radius);
		  box-shadow:var(--shadow);
		  padding:28px 32px;
		}
		h2{
		  font-size:1.8rem;
		  margin-bottom:24px;
		  color:var(--accent);
		  text-align:center;
		}
		.log-item{
		  margin-bottom:24px;
		  border-left:4px solid var(--accent);
		  padding-left:16px;
		}
		.log-version{
		  font-weight:700;
		  font-size:1.15rem;
		  color:var(--accent);
		  margin-bottom:4px;
		}
		.log-content{
		  white-space:pre-wrap;
		  word-break:break-word;
		  color:var(--text);
		  line-height:1.65;
		}
		.loading{
		  text-align:center;
		  color:var(--muted);
		  font-size:1rem;
		}
		
		/* 响应式微调 */
		@media(max-width:600px){
		  .log-container{margin:12px;padding:20px 22px}
		  h2{font-size:1.5rem}
		  .log-item{margin-bottom:18px}
		}
		  /* ===== MC 颜色 ===== */
		  .mc-0 { color:#000000; }  .mc-bg-0 { background:#000000; }
		  .mc-1 { color:#0000AA; }  .mc-bg-1 { background:#00002A; }
		  .mc-2 { color:#00AA00; }  .mc-bg-2 { background:#002A00; }
		  .mc-3 { color:#00AAAA; }  .mc-bg-3 { background:#002A2A; }
		  .mc-4 { color:#AA0000; }  .mc-bg-4 { background:#2A0000; }
		  .mc-5 { color:#AA00AA; }  .mc-bg-5 { background:#2A002A; }
		  .mc-6 { color:#FFAA00; }  .mc-bg-6 { background:#402A00; }
		  .mc-7 { color:#AAAAAA; }  .mc-bg-7 { background:#2A2A2A; }
		  .mc-8 { color:#555555; }  .mc-bg-8 { background:#151515; }
		  .mc-9 { color:#5555FF; }  .mc-bg-9 { background:#15153F; }
		  .mc-a { color:#55FF55; }  .mc-bg-a { background:#153F15; }
		  .mc-b { color:#55FFFF; }  .mc-bg-b { background:#153F3F; }
		  .mc-c { color:#FF5555; }  .mc-bg-c { background:#3F1515; }
		  .mc-d { color:#FF55FF; }  .mc-bg-d { background:#3F153F; }
		  .mc-e { color:#FFFF55; }  .mc-bg-e { background:#3F3F15; }
		  .mc-f { color:#FFFFFF; }  .mc-bg-f { background:#3F3F3F; }
		  /* 基岩版材料色 */
		  .mc-g { color:#DDD605; } .mc-bg-g { background:#373501; }
		  .mc-h { color:#E3D4D1; } .mc-bg-h { background:#383534; }
		  .mc-i { color:#CECACA; } .mc-bg-i { background:#333232; }
		  .mc-j { color:#443A3B; } .mc-bg-j { background:#110E0E; }
		  .mc-m { color:#971607; } .mc-bg-m { background:#250501; }
		  .mc-n { color:#B4684D; } .mc-bg-n { background:#2D1A13; }
		  .mc-p { color:#DEB12D; } .mc-bg-p { background:#372C0B; }
		  .mc-q { color:#47A036; } .mc-bg-q { background:#04280D; }
		  .mc-s { color:#2CBAA8; } .mc-bg-s { background:#0B2E2A; }
		  .mc-t { color:#21497B; } .mc-bg-t { background:#08121E; }
		  .mc-u { color:#9A5CC6; } .mc-bg-u { background:#261731; }
		  .mc-v { color:#EB7114; } .mc-bg-v { background:#3B1D05; }
		  
		  /* ===== MC 格式 ===== */
		  .mc-bold { font-weight:bold; }
		  .mc-italic { font-style:italic; }
		  .mc-underline { text-decoration:underline; }
		  .mc-strike { text-decoration:line-through; }
		  .mc-random { /* 随机乱码效果 */
		    display:inline-block;
		    animation: mcRandom .25s steps(1) infinite;
		  }
		  @keyframes mcRandom {
		    0% { opacity:1; }
		    50% { opacity:.6; }
		  }
		  
		  #footer {
		    font-family:"Segoe UI",Roboto,Helvetica,Arial,sans-serif;
		  }
		  
		
	</style>
    </head>
    <body>
        <div class="log-container">
            <h2>更新日志</h2>
            <div id="logs">
                加载中...
            </div>
        </div>
        <footer class="w-full bg-gradient-to-br from-gray-900 to-black text-white py-16" style="width:100%" id="footer">
            <div class="w-full mx-auto px-4 sm:px-6 lg:px-8">
                <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-8 mb-12">
                    <div class="lg:col-span-2">
                        <div class="flex items-center space-x-3 mb-6">
                            <div class="w-12 h-12 bg-gradient-to-br from-green-400 to-emerald-600 rounded-lg flex items-center justify-center"><img src="/images/logo.jpg" alt="Logo" class="w-full h-full object-cover rounded-lg">
                            </div>
                            <div>
                              <h3 class="text-xl font-bold">Minecraft</h3>
                              <p class="text-gray-400 text-sm">原版优化整合包</p>
                            </div>
                        </div>
                        <p class="text-gray-300 leading-relaxed mb-6 max-w-md">体验更多可能的Minecraft，使用资源包获取更加方便、快捷的游玩体验。</p>
                        <div class="flex space-x-4">
                            <div class="flex items-center space-x-2 bg-gray-800 px-3 py-1 rounded-full"><span class="text-sm">🎉</span> <span class="text-xs text-gray-300">方便</span>
                            </div>
                            <div class="flex items-center space-x-2 bg-gray-800 px-3 py-1 rounded-full"><span class="text-sm">🔒</span> <span class="text-xs text-gray-300">快捷</span>
                            </div>
                            <div class="flex items-center space-x-2 bg-gray-800 px-3 py-1 rounded-full"><span class="text-sm">💬</span> <span class="text-xs text-gray-300">免费</span>
                            </div>
                        </div>
                    </div>
                    <div>
                        <h4 class="text-lg font-semibold mb-4">快速链接</h4>
                        <ul class="space-y-3">
                            <li><a href="https://vanilla-opti.iw1o1.dpdns.org/#home" class="text-gray-400 hover:text-green-400 transition-colors text-sm">首页</a></li>
                            <li><a href="https://vanilla-opti.iw1o1.dpdns.org/#features" class="text-gray-400 hover:text-green-400 transition-colors text-sm">介绍</a></li>
                            <li><a href="https://vanilla-opti.iw1o1.dpdns.org/#feedback" class="text-gray-400 hover:text-green-400 transition-colors text-sm">问题反馈</a></li>
                            <li><a href="https://vanilla-opti.iw1o1.dpdns.org/#join" class="text-gray-400 hover:text-green-400 transition-colors text-sm">立即使用</a></li>
                            <li><a href="https://vanilla-opti.iw1o1.dpdns.org/changelog" class="text-gray-400 hover:text-green-400 transition-colors text-sm">更新日志</a></li>
                        </ul>
                    </div>
                    <div>
                        <h4 class="text-lg font-semibold mb-4">联系信息</h4>
                        <ul class="space-y-3">
                            <li class="text-gray-400 text-sm"><span class="text-gray-500">资源包名称：</span> <br> Minecraft 原版优化整合包</li>
                            <li class="text-gray-400 text-sm"><span class="text-gray-500">联系方式：</span> <br> QQ群、Bilibili</li>
                        </ul>
                    </div>
                </div>
                <div class="border-t border-gray-800 my-8"></div>
                <div class="flex flex-col md:flex-row justify-between items-center space-y-4 md:space-y-0">
                    <div class="flex items-center space-x-4">
                        <p class="text-gray-400 text-sm">Copyright © 2025 林台、IceWars1o1</p> <span class="text-gray-600">|</span>
                        <p class="text-gray-400 text-sm">保留所有权利</p>
                    </div>
                    <div class="flex items-center space-x-6"><button class="flex items-center space-x-2 text-gray-400 hover:text-green-400 transition-colors text-sm" onclick="redirect(0)">
                            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewbox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-github "><path d="M15 22v-4a4.8 4.8 0 0 0-1-3.5c3 0 6-2 6-5.5.08-1.25-.27-2.48-1-3.5.28-1.15.28-2.35 0-3.5 0 0-1 0-3 1.5-2.64-.5-5.36-.5-8 0C6 2 5 2 5 2c-.3 1.15-.3 2.35 0 3.5A5.403 5.403 0 0 0 4 9c0 3.5 3 5.5 6 5.5-.39.49-.68 1.05-.85 1.65-.17.6-.22 1.23-.15 1.85v4"></path> <path d="M9 18c-4.51 2-5-2-7-2"></path>
                            </svg> <span>MIT License</span>
                            <svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewbox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-external-link "><path d="M15 3h6v6"></path> <path d="M10 14 21 3"></path> <path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"></path>
                            </svg> </button>
                        <div class="flex items-center space-x-2 text-gray-400 text-sm"><span>由</span>
                            <svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewbox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-heart text-red-500"><path d="M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z"></path>
                            </svg> <span>制作</span>
                        </div>
                    </div>
                </div>
                <div class="mt-8 text-center">
                    <div class="flex justify-center space-x-4 text-3xl opacity-30"><span class="animate-pulse">⛏️</span> <span class="animate-pulse" style="animation-delay: 0.5s;">🏗️</span> <span class="animate-pulse" style="animation-delay: 1s;">⚔️</span> <span class="animate-pulse" style="animation-delay: 1.5s;">🛡️</span> <span class="animate-pulse" style="animation-delay: 2s;">💨</span>
                    </div>
                </div>
            </div>
        </footer>
        <script src="/changelog/assets/secure-api.js"></script>
        <script>
            /* ========== 日志加载主逻辑 ========== */
            (async function () {
              const LOGS_URL = '/changelog/assets/gateway.php';   // 与当前页同目录
              const API_KEY = 'miku_dream_2025_secure_api_v1';
            
              try {
                const raw = await fetch(LOGS_URL, {
                  method: 'POST',
                  headers: {
                    'Content-Type': 'application/json',
                    'X-API-Key': API_KEY,
                    'X-Request-Type': 'logs',
                    'X-Request-ID': 'req_' + Date.now() + '_' + Math.random().toString(36).slice(2)
              },
              credentials: 'same-origin'
            }).then(r => r.text());
        
            /* ---- 非 JSON 直接跳转 ---- */
            if (raw.trim().startsWith('<')) {
              window.location.replace('./out-site');   // 跳转
              return;                                  // 终止渲染
            }
        
            const json = JSON.parse(raw);
            const logs = json.logs ?? json.data ?? [];
            if (!json.success || !Array.isArray(logs)) throw new Error('字段缺失');
        
            /* ---- 渲染 ---- */
            document.getElementById('logs').innerHTML = logs.map(log =>
  `<div class="log-item">
                 <div class="log-version">${log.version}</div>
                 <div class="log-content">${colorizeMC(log.content)}</div>
               </div>`
            ).join('');
        
          } catch (e) {
            document.getElementById('logs').innerHTML =
              `<li style="color:#e74c3c;text-align:center;">加载失败：${e.message}</li>`;
          }
        })();
		
		function colorizeMC(raw, asBlock = false) {
          const colorMap = {
            '0':'0','1':'1','2':'2','3':'3','4':'4','5':'5','6':'6','7':'7','8':'8','9':'9',
            'a':'a','b':'b','c':'c','d':'d','e':'e','f':'f',
            'g':'g','h':'h','i':'i','j':'j','m':'m','n':'n','p':'p','q':'q','s':'s','t':'t','u':'u','v':'v'
          };
          const formatMap = { 'k':'random','l':'bold','m':'strike','n':'underline','o':'italic','r':'reset' };
        
          let html = '';
        
          // ✅ 按行拆，每行之前自动加 §r，实现“换行还原样式”
          const lines = raw.split('\n');
        
          for (let i = 0; i < lines.length; i++) {
            if (i > 0) html += '<br>';
        
            let line = lines[i];
            let curColor = '';
            let curFmt = new Set();
        
            function open() {
              const cls = [];
              if (curColor) cls.push('mc-' + curColor);
              curFmt.forEach(f => cls.push('mc-' + f));
              return cls.length ? `<span class="${cls.join(' ')}">` : '';
            }
        
            function wrap(text) {
              if (!text && text !== 0) return '';
              const o = open();
              return o ? o + text + '</span>' : text;
            }
        
            // ✅ 每行之前自动加 §r，实现“还原样式”
            line = '§r' + line;
        
            const parts = line.split(/(§[0-9a-fk-or])/gi);
            for (let j = 0; j < parts.length; j++) {
              const p = parts[j];
              if (!p) continue;
        
              if (p[0] === '§') {
                const code = p[1].toLowerCase();
                if (colorMap[code]) {
                  curColor = colorMap[code];
                  curFmt.clear();
                } else if (formatMap[code]) {
                  if (code === 'r') {
                    curColor = '';
                    curFmt.clear();
                  } else {
                    curFmt.add(formatMap[code]);
                  }
                }
                continue;
              }
        
              html += wrap(p);
            }
          }
        
          return asBlock ? `<div>${html}</div>` : html;
        }
        
        function redirect(urlNum){
            if (urlNum === 0){
                window.location.href="https://iw1o1.dpdns.org/copyright/";
            }
        }
        
		loadLogs();
	</script>
    </body>
</html>